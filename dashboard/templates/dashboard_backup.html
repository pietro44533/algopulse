<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Segnale Tecnico</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f7f7f7;
      padding: 20px;
      color: #333;
    }
    .task-bar {
      margin-bottom: 16px;
    }
    .pill {
      display: inline-block;
      background-color: #e2ecf9;
      color: #235;
      border-radius: 16px;
      padding: 6px 12px;
      font-size: 0.85em;
      margin-right: 8px;
      cursor: pointer;
      position: relative;
      text-align: center;
      min-width: 110px;
      max-width: 220px;
    }
    .pill.active {
      background-color: #cde;
      font-weight: bold;
      border: 1px solid #999;
    }
    .bell {
      margin-left: 6px;
      cursor: pointer;
      font-size: 1.1em;
      display: inline;
      vertical-align: middle;
    }
    .remove-task-btn {
      background: transparent;
      border: none;
      color: #b00;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      padding: 0 4px;
      line-height: 1;
      display: inline;
      vertical-align: middle;
    }
    .bell.off {
      opacity: 0.5;
    }
    .status {
      font-weight: bold;
      margin-bottom: 12px;
      display: inline-block;
      background-color: #d4f4d4;
      color: #155d15;
      padding: 6px 12px;
      border-radius: 6px;
    }
    .match-box {
      background-color: #fff;
      padding: 16px;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    .header {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 6px;
    }
    .strategia, .campionato {
      margin-bottom: 4px;
    }
    .quote, .indicatori {
      margin-top: 6px;
    }
    .tech {
      margin-top: 12px;
      padding-top: 8px;
      border-top: 1px solid #ddd;
    }
    .tech span {
      display: inline-block;
      margin-right: 10px;
      padding: 4px 8px;
      border-radius: 6px;
    }
    .parser-ok    { background-color: #d4f4d4; color: #155d15; }
    .api-ok       { background-color: #d4f4d4; color: #155d15; }
    .api-ko       { background-color: #f7d6d6; color: #820000; }
    .trade-ok     { background-color: #d4f4d4; color: #155d15; }
    .trade-ko     { background-color: #f7d6d6; color: #820000; }
    .add-task-btn-circle {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        background: #1976d2;
        color: #fff;
        border: none;
        font-size: 1.3em;
        font-weight: bold;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        margin-right: 10px;
        cursor: pointer;
        transition: background 0.2s;
    }
    .add-task-btn-circle:hover {
        background: #1565c0;
    }
    .add-task-btn {
      display: block;
      margin-bottom: 18px; /* o la distanza che preferisci */
    }
  </style>
</head>
<body>
  <button class="add-task-btn" onclick="addTaskPrompt()">+</button>
  <!-- ğŸ”˜ Task interattivi con campanella -->
  <div class="task-bar">
    <span class="pill" data-filter="goal-ht">
      Goal HT <span class="bell" data-task="goal-ht">ğŸ””</span><button class="remove-task-btn">-</button>
    </span>
    <span class="pill" data-filter="over25">
      Over 2.5 <span class="bell" data-task="over25">ğŸ””</span><button class="remove-task-btn">-</button>
    </span>
    <span class="pill" data-filter="pareggio-ht">
      Pareggio HT <span class="bell" data-task="pareggio-ht">ğŸ””</span><button class="remove-task-btn">-</button>
    </span>
  </div>

  <!-- ğŸŸ¢ Stato Telegram -->
  <div class="status">ğŸ“¨ Telegram: OK</div>

  <!-- ğŸ§± Blocchi Match filtrabili -->
  <div class="match-box" data-task="goal-ht">
    <div class="header">ğŸ•’ 15 Lug â€¢ 19:00 â€” Palermo vs Ascoli</div>
    <div class="strategia">ğŸ¯ Strategia: Goal nel 1Âº Tempo</div>
    <div class="campionato">ğŸ† Serie B</div>
    <div class="quote">ğŸ“Š Start: 2.10 / 3.25 / 3.45</div>
    <div class="quote">ğŸ“Š Kickoff: 2.15 / 3.10 / 3.50</div>
    <div class="indicatori">ğŸ§® RTG: 1.4 | GT: 1.95 | TT: 16.8 | SOD: 2.01</div>
    <div class="indicatori">ğŸ”¹ DB: +18.44 | DB_P: +19.23 | AGV Tot: 66.5</div>
    <div class="tech">
      <span class="parser-ok">ğŸ§  Parser: Valido</span>
      <span class="api-ko">ğŸ“¡ API BetAngel: Errore</span>
      <span class="trade-ko">ğŸ¬ Trade: Non eseguita</span>
    </div>
  </div>

  <div class="match-box" data-task="over25" style="display: none;">
    <div class="header">ğŸ•’ 15 Lug â€¢ 21:00 â€” Brescia vs Cosenza</div>
    <div class="strategia">ğŸ¯ Strategia: Over 2.5</div>
    <div class="campionato">ğŸ† Serie B</div>
    <div class="quote">ğŸ“Š Start: 1.90 / 3.45 / 4.20</div>
    <div class="quote">ğŸ“Š Kickoff: 1.95 / 3.40 / 4.10</div>
    <div class="indicatori">ğŸ§® RTG: 1.7 | GT: 2.10 | TT: 18.5 | SOD: 2.22</div>
    <div class="indicatori">ğŸ”¹ DB: +14.21 | DB_P: +16.85 | AGV Tot: 74.3</div>
    <div class="tech">
      <span class="parser-ok">ğŸ§  Parser: Valido</span>
      <span class="api-ok">ğŸ“¡ API BetAngel: OK</span>
      <span class="trade-ok">ğŸ¬ Trade: Eseguita</span>
    </div>
  </div>

  <div class="match-box" data-task="pareggio-ht" style="display: none;">
    <div class="header">ğŸ•’ 16 Lug â€¢ 18:30 â€” Como vs Ternana</div>
    <div class="strategia">ğŸ¯ Strategia: Pareggio HT</div>
    <div class="campionato">ğŸ† Serie B</div>
    <div class="quote">ğŸ“Š Start: 3.10 / 2.80 / 2.40</div>
    <div class="quote">ğŸ“Š Kickoff: 3.20 / 2.75 / 2.35</div>
    <div class="indicatori">ğŸ§® RTG: 1.2 | GT: 1.60 | TT: 15.2 | SOD: 2.05</div>
    <div class="indicatori">ğŸ”¹ DB: +11.55 | DB_P: +12.40 | AGV Tot: 59.8</div>
    <div class="tech">
      <span class="parser-ok">ğŸ§  Parser: Valido</span>
      <span class="api-ok">ğŸ“¡ API BetAngel: OK</span>
      <span class="trade-ko">ğŸ¬ Trade: Non eseguita</span>
    </div>
  </div>

 

  <!-- âš™ï¸ Script filtro + toggle notifiche -->
  <script>
    // ğŸ” Filtro match-box al clic sulla pillola
    document.querySelectorAll('.pill').forEach(pill => {
      pill.addEventListener('click', () => {
        const filtro = pill.getAttribute('data-filter');

        document.querySelectorAll('.match-box').forEach(box => {
          box.style.display = box.getAttribute('data-task') === filtro ? 'block' : 'none';
        });

        document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
        pill.classList.add('active');
      });
    });

    // ğŸ”” Toggle notifiche al clic sulla campanella
    document.querySelectorAll('.bell').forEach(bell => {
      bell.addEventListener('click', (e) => {
        e.stopPropagation(); // âš ï¸ evita attivazione filtro

        bell.classList.toggle('off');
        bell.textContent = bell.classList.contains('off') ? 'ğŸ”•' : 'ğŸ””';

        const task = bell.getAttribute('data-task');
        const stato = bell.classList.contains('off') ? 'DISATTIVATE' : 'ATTIVE';
        console.log(`ğŸ”” Notifiche per ${task}: ${stato}`);
      });
    });

    function addTaskPrompt() {
        const name = prompt("Nome della nuova task/canale:");
        if (!name) return;
        // Crea nuovo span .pill con struttura coerente
        const pill = document.createElement('span');
        pill.className = 'pill';
        pill.setAttribute('data-filter', name.toLowerCase().replace(/\s+/g, '-'));
        pill.innerHTML = `${name} <span class="bell" data-task="${name.toLowerCase().replace(/\s+/g, '-')}">ğŸ””</span><button class="remove-task-btn">-</button>`;
        // Inserisci dopo l'ultima .pill nella .task-bar
        const taskBar = document.querySelector('.task-bar');
        const lastPill = taskBar.querySelectorAll('.pill');
        if (lastPill.length > 0) {
            lastPill[lastPill.length - 1].after(pill);
        } else {
            taskBar.appendChild(pill);
        }
        // Aggiungi eventi come le altre pillole
        pill.addEventListener('click', () => {
            const filtro = pill.getAttribute('data-filter');
            document.querySelectorAll('.match-box').forEach(box => {
                box.style.display = box.getAttribute('data-task') === filtro ? 'block' : 'none';
            });
            document.querySelectorAll('.pill').forEach(p => p.classList.remove('active'));
            pill.classList.add('active');
        });
        const bell = pill.querySelector('.bell');
        bell.addEventListener('click', (e) => {
            e.stopPropagation();
            bell.classList.toggle('off');
            bell.textContent = bell.classList.contains('off') ? 'ğŸ”•' : 'ğŸ””';
            const task = bell.getAttribute('data-task');
            const stato = bell.classList.contains('off') ? 'DISATTIVATE' : 'ATTIVE';
            console.log(`ğŸ”” Notifiche per ${task}: ${stato}`);
        });
        // Evento per il pulsante meno
        const removeBtn = pill.querySelector('.remove-task-btn');
        removeBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            if (window.confirm('Sei sicuro di voler eliminare questa task?')) {
                pill.remove();
            }
        });
    }
 
    // Evento per i pulsanti meno statici
    document.querySelectorAll('.remove-task-btn').forEach(btn => {
      btn.addEventListener('click', function(e) {
        e.stopPropagation();
        if (window.confirm('Sei sicuro di voler eliminare questa task?')) {
          this.closest('.pill').remove();
        }
      });
    });
  </script>
</body>
</html>